<!DOCTYPE html>
<html>
	<head>
		<title>XLNet Chatbot</title>
	</head>
	<body>
		<h1>XLNet Chatbot</h1>
		<input type="text" id="user_input">
		<button onclick="get_response()">Send</button>
		<ul id="chatlog"></ul>
		<script>
			function get_response() {
				var user_input = document.getElementById("user_input").value;
				document.getElementById("user_input").value = "";
				var xhr = new XMLHttpRequest();
				xhr.open("POST", "/predict");
				xhr.setRequestHeader("Content-Type", "application/json");
				xhr.onreadystatechange = function() {
					if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
						var response = JSON.parse(this.responseText)["predictions"][0]["generated_text"];
						var li = document.createElement("li");
						li.innerHTML = "<b>Bot:</b> " + response;
						document.getElementById("chatlog").appendChild(li);
					}
				}
				xhr.send(JSON.stringify({"inputs": user_input}));
			}
		</script>
	</body>
</html> 
